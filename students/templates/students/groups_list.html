{% extends "students/base.html" %} 

{% load static %} 

{% block meta_title %}Студенти{% endblock meta_title %} 

{% block title %}Список груп{% endblock title %}

{% block content %}

<!-- Add student button -->
  <a class="btn btn-primary mb-3" href='{% url "groups_add" %}' role="button"
    >Додати групу</a
  >
  <!-- Start groups Listing -->
  {% if groups %}
  <table class="table table-hover table-striped">
    {% with order_by=request.GET.order_by reverse=request.GET.reverse %}
      <thead>
        <tr>
          <th><a href="#">№</a></th>
          <th>
            <a href="{% url 'groups' %}?order_by=title{% if order_by == 'title' and reverse != '1' %}&amp;reverse=1{% endif %}">
            Назва 
            {% if order_by == 'title' and reverse != '1' %}&uarr;
            {% elif order_by == 'title' and reverse == '1' %}&darr;
            {% endif %} 
            </a>
          </th>
          <th><a href="#">Староста</a></th>
          <th>Дії</th>
        </tr>
      </thead>
    {% endwith %}  
    <tbody>
      {% for group in groups %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td>
            <a href="{% url 'groups_edit' group.id %}">{{ group.title }}</a>
          </td>
          <td>{% if group.leader %}<a href="{% url 'students_edit' group.leader.id %}">{{ group.leader }}</a>{% else %}Немає{% endif %}</td>
          <td>
            <div class="dropdown">
              <button
                type="button"
                class="btn btn-primary dropdown-toggle"
                data-toggle="dropdown"
              >
                Дія
              </button>
              <div class="dropdown-menu">
                <a class="dropdown-item" href="{% url 'groups_edit' group.id %}"
                  >Редагувати</a
                >
                <a class="dropdown-item" href="{% url 'groups_delete' group.id %}"
                  >Видалити</a
                >
              </div>
            </div>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
    <p>Поки немає груп у базі.</p>
  {% endif %}

  <!-- End groups listing -->
  {% if groups.has_other_pages %}
    {% with order_by=request.GET.order_by reverse=request.GET.reverse %}
      <nav aria-label="Page navigation">
        <ul class="pagination">
          <li class="page-item">
            <a class="page-link" href="{% url 'groups' %}?page=1&amp;order_by={{ order_by }}&amp;reverse={{ reverse }}">&laquo;
            </a>
          </li>
          {% for p in groups.paginator.page_range %}
            <li class="page-item {% if groups.number == p %}active{% endif %}">
              <a class="page-link" href="{% url 'groups' %}?page={{p}}&amp;order_by={{ order_by }}&amp;reverse={{ reverse }}">
                {{ p }}   
              </a>
            </li>
          {% endfor %}  
          <li class="page-item">
            <a class="page-link" href="{% url 'groups' %}?page={{groups.paginator.num_pages}}">&raquo;
            </a>
          </li>
        </ul>
      </nav>
    {% endwith %}    
  {% endif %}  
{% endblock content %}
